@model ActorManagerModel
@{
	<div class="tableContainer">
		@foreach(var actor in Model.Actors){
			<div class="tableNode", id=@actor.Id>
				<div class="inNodeInfo">
					<img src=@actor.PhotoUrl alt="photo" id="image" class="nodeImage" />
					<br />
					<label>@(actor.Name + " " + actor.Surname)</label>
					<br />
					<label>@(actor.BirthYear)</label>
				</div>
				<div class="buttons">
					@if (Model.PageMode == ActorManagerPageMode.Manage)
					{
						<button class="editButton">Edit</button>
						<button class="deleteButton">Delete</button>
					}
					else if (Model.PageMode == ActorManagerPageMode.Select)
					{
						<button class="selectButton"> </button>
					}
				</div>
			</div>
		}
	</div>
}

@section Scripts {
	<script type="text/javascript">
		//Delete buttons
		var deleteButtons = document.getElementsByClassName("deleteButton");
		for(const button of deleteButtons){
			button.addEventListener("click",
			function (e){
				if(window.confirm("Do you want to delete this actor?")){
					const id = e.target.parentElement.parentElement.id;
					const href = window.location.href + '/Delete/' + Number(id);
					const xhr = new XMLHttpRequest();
					xhr.open("DELETE", href);
					xhr.onreadystatechange = function(){
						if(xhr.readyState == 4){
							document.location.reload();
						}
					}
					xhr.send();
				}
			});
		}

		//Select buttons
		var deleteButtons = document.getElementsByClassName("selectButton");
		for(const button of deleteButtons)
		{
			button.addEventListener("click",
			function (e)
			{
				const id = e.target.parentElement.parentElement.id;
				const href = window.location.origin + "/Roles/Add" + Number(id);
			}
			)
		}
	</script>
}  
